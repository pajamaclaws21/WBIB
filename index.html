<!DOCTYPE html>
<html>
  <head>
    <title>WBIB Viewer</title>
    <link rel="shortcut icon" type="image/jpg" href="favicon.ico"/>
  </head>
    <input type="text" id="siteinput" name="siteinput" placeholder="Website" style="position: relative; z-index: 999;">
    <div id="embedsite" style="z-index: 997;"></div>
    <script>
function myFunction() {
	document.getElementById("embedsite").innerHTML = 'Loading...';
	var site = document.getElementById('siteinput').value;
	fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(site)}`)
                    .then(response => {
                      if (response.ok) return response.json()
		      document.getElementById("embedsite").innerHTML = 'Uh-oh, the website has run into an error. (Error code: Proxy&RES-NOT-OK)';
                      throw new Error('Network response was not ok.')
                    })
                    .then(data => document.getElementById("embedsite").innerHTML = data.contents;
			  var iconlink = site.split("."); //
	                  var iconlinklength = iconlink.length - 1;
			  var iconlinkdomain = iconlink[iconlinklength].split("/")[0];
			  var iconlink = site.split(iconlinkdomain)[0] + iconlinkdomain
			  var iconlinkfinal = iconlink + '/favicon.ico';
			  document.getElementById('favicon').setAttribute('href', iconlinkfinal); //
			 );
};
    var siteinput = document.getElementById("siteinput");
siteinput.addEventListener("keydown", function (e) {
    if (e.code === "Enter") {
        myFunction();
    }
});
</script>
  </body>
</html>
